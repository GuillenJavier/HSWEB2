<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}HealthSystem{% endblock %}</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">

  <style>
    :root{
      --brand:#2563eb; /* azul */
      --brand-2:#10b981; /* verde */
    }

    /* ----------- Hero ----------- */
    .hero {
      position: relative;
      border-radius: 24px;
      overflow: hidden;
      min-height: 220px;
      display: grid;
      place-items: center;
      padding: 2rem;
      color: white;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, color-mix(in srgb, var(--brand) 70%, black) 0%, #0ea5e9 100%);
    }
    .hero img.hero-bg {
      position:absolute; inset:0; width:100%; height:100%;
      object-fit: cover; opacity:.25; filter: saturate(1.1) contrast(1.05);
    }
    .hero .overlay {
      position:absolute; inset:0;
      background: radial-gradient(ellipse at 80% -20%, rgba(255,255,255,.18), transparent 50%);
    }
    .hero h1,.hero p{position:relative; z-index:2; text-align:center}
    .hero .cta{position:relative; z-index:2; margin-top:.75rem}

    /* ----------- Utilidades ----------- */
    .center { text-align:center; }
    .action-bar {
      display:flex; gap:.75rem; justify-content:center; align-items:center; flex-wrap:wrap;
      margin: .75rem 0 1.25rem;
    }
    .btn {
      display:inline-flex; align-items:center; justify-content:center;
      padding:.7rem 1.05rem; border-radius:999px; text-decoration:none !important;
      border:1px solid transparent; font-weight:700; letter-spacing:.2px; line-height:1;
      box-shadow:0 6px 18px rgba(0,0,0,.08);
      transition: transform .08s ease, box-shadow .2s ease, filter .2s ease, background .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); box-shadow:0 8px 22px rgba(0,0,0,.12); }
    .btn:active{ transform: translateY(0); }
    .btn-primary{ background:var(--brand); color:white; }
    .btn-secondary{ background: var(--brand-2); color:#053b2f; }
    .btn-ghost{ background:transparent; color:var(--brand); border-color:var(--brand); }

    /* ----------- Tarjetas ----------- */
    .card {
      border:1px solid var(--muted-border-color);
      border-radius:20px; overflow:hidden; background: var(--card-background-color, var(--background-color));
      box-shadow: 0 10px 26px rgba(0,0,0,.06);
    }
    .card .media {
      height:160px; overflow:hidden; display:block; background:#f5f7fb;
    }
    .card .media img{ width:100%; height:160px; object-fit:cover; }
    .card .body { padding:1rem 1.1rem; }

    /* ----------- Tabla ----------- */
    table{
      border-collapse:separate; border-spacing:0; overflow:hidden;
      border-radius:16px; box-shadow: 0 8px 24px rgba(0,0,0,.05);
    }
    thead th{ background: color-mix(in srgb, var(--brand) 12%, white); }
    tbody tr:hover{ background: color-mix(in srgb, var(--brand) 6%, transparent); }

    /* ----------- Chips ----------- */
    .chip{ display:inline-flex; align-items:center; gap:.35rem; padding:.25rem .6rem;
      border-radius:999px; font-size:.85rem; border:1px solid var(--muted-border-color);
      background: #f8fafc;
    }

    /* Contenedores */
    .grid2{ display:grid; grid-template-columns: 1fr; gap:1rem; }
    @media(min-width:900px){ .grid2{ grid-template-columns: 1.1fr .9fr; } }
  </style>
</head>
<body>
  <nav class="container">
    <ul>
      <li><strong>HealthSystem</strong></li>
    </ul>
    <ul>
      {% if current_user.is_authenticated %}
        <li><a href="{{ url_for('dashboard') }}">Inicio</a></li>
        {% if current_user.tipo == 'PACIENTE' %}
          <li><a href="{{ url_for('expediente_view', paciente_id=current_user.id) }}">Mi expediente</a></li>
        {% endif %}
        {% if current_user.tipo == 'ADMIN' or current_user.tipo == 'MEDICO' %}
        {% endif %}
        <li><a href="{{ url_for('logout') }}">Salir</a></li>
      {% else %}
        <li><a href="{{ url_for('login') }}">Entrar</a></li>
        <li><a href="{{ url_for('register') }}">Registro</a></li>
      {% endif %}
    </ul>
  </nav>

  {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="container mt-3" style="max-width: 960px;">
      {% for category, message in messages %}
        <div class="alert alert-{{ 'warning' if category=='error' else category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}

    </div>
  {% endif %}
{% endwith %}

  <main class="container">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div>
          {% for cat, msg in messages %}
            <article class="{{ cat }}">{{ msg }}</article>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </main>

</body>
</html>
